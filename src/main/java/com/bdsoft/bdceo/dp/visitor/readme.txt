参考：https://blog.csdn.net/zoinsung_lee/article/details/82777748
    https://www.jianshu.com/p/1fc48ef75753

在数据结构中保存着许多元素，我们会对这些元素进行“处理”。
在Visitor模式中，数据结构与处理被分离开来。
我们编写一个表示“访问者”的类来访问数据结构中的元素，并把对各元素的处理交给访问类。
这样，当需要增加新的处理时，我们只需要编写新的访问者，然后让数据结构可以接受访问者的访问即可。

涉及角色
Visitor 抽象访问者角色，为该对象结构中具体元素角色声明一个访问操作接口。该操作接口的名字和参数标识了发送访问请求给具体访问者的具体元素角色，这样访问者就可以通过该元素角色的特定接口直接访问它。
ConcreteVisitor.具体访问者角色，实现Visitor声明的接口。
Element 定义一个接受访问操作(accept())，它以一个访问者(Visitor)作为参数。
ConcreteElement 具体元素，实现了抽象元素(Element)所定义的接受操作接口。
ObjectStructure 结构对象角色，这是使用访问者模式必备的角色。它具备以下特性：能枚举它的元素；可以提供一个高层接口以允许访问者访问它的元素；如有需要，可以设计成一个复合对象或者一个聚集（如一个列表或无序集合）
通俗理解
我作为一个访客(Visitor)到朋友家(Element)拜访，朋友之间喝喝酒，聊聊天，再互相吹捧。聊天的时候，朋友告诉我他今年的表现(doSomthing)，然后我就做(visit-self-method)一些对这件事的评价。
老板作为视察者，查阅(访问)手下员工的工作业绩。老板是Visitor的抽象实现，员工是Element的抽象实现。对象结构(Object Structure)为员工的业绩等信息
家里有一台电脑，电脑出现了一点问题，那么我作为访问者，想去了解电脑的那个部分出了问题。我Visitor，电脑的各个部分(Element)，查看有没有坏(visit method)
应该有很多类似的比喻，在开发的过程中多去思考，做什么事情都要思考。

实现细节
定义一个表示Element的接口
实现Element接口。创建Element的实体类ConcreteElement
创建一个表示访问者Visitor的接口
实现Visitor的接口，创建Visitor实体类ConcreteVisitor，(有时候会有多个访问者)
使用Visitor实体类来访问Element。
特性
优点
符合单一职责原则
元素类可以通过接受不同的访问者来实现对不同操作的扩展。
缺点
具体元素对访问者公布细节，违背了迪米特法则。
违背了依赖倒置原则，访问者依赖的是具体元素，而不是抽象元素。
适用场景
对象结构中对象对应的类很少改变，但经常需要在此对象结构上定义新的操作。
需要对一个对象结构中的对象进行很多不同的并且不相关的操作，而需要避免让这些操作"污染"这些对象的类，也不希望在增加新操作时修改这些类。
注意事项：访问者可以对功能进行统一，可以做报表、UI、拦截器与过滤器。

作者：Real_man
链接：https://www.jianshu.com/p/1fc48ef75753
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。